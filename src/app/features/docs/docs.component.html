<nz-layout class="base">
  <nz-sider
    nzTheme="light"
    nzBreakpoint="md"
    [nzCollapsedWidth]="0"
    [nzWidth]="siderWidth"
  >
    <aside class="sidenav-sticky">
      @if (article(); as article) {
        @if (!isXLarge) {
          <sw-doc-toc
            class="toc-sticky"
            [isFixed]="false"
            [docAttrs]="article.attributes.toc"
          ></sw-doc-toc>
        }
      }
      <sw-sidenav [navItems]="navigation"></sw-sidenav>
    </aside>
  </nz-sider>
  <nz-layout class="inner-layout">
    <aside class="navigation">
      @if (hideToc) {
        <div>
          <button nz-button nzType="default" (click)="isDrawerVisible = true">
            <span nz-icon nzType="menu-unfold" nzTheme="outline"></span>
          </button>
        </div>
      }
      <sw-auto-breadcrumbs></sw-auto-breadcrumbs>
    </aside>
    @if (isBrowser) {
      <nz-drawer
        nzPlacement="left"
        nzTitle="კონტენტი"
        [nzVisible]="isDrawerVisible"
        (nzOnClose)="isDrawerVisible = false"
      >
        <ng-container *nzDrawerContent>
          <div class="drawer">
            @if (article(); as article) {
              <sw-doc-toc
                [isFixed]="false"
                [docAttrs]="article.attributes.toc"
              ></sw-doc-toc>
            }
            <sw-sidenav [navItems]="navigation"></sw-sidenav>
          </div>
        </ng-container>
      </nz-drawer>
    }
    <nz-content>
      <section [class.with-toc]="!hideToc">
        @if (article(); as article) {
          <sw-doc-viewer
            [class.full-size]="!isXLarge"
            [docContent]="article"
          ></sw-doc-viewer>
          <aside>
            @if (!hideToc && isXLarge) {
              <sw-doc-toc [docAttrs]="article.attributes.toc"></sw-doc-toc>
            }
          </aside>
        } @else {
          <p>კონტენტი არ არის</p>
        }
      </section>
    </nz-content>
  </nz-layout>
</nz-layout>
