@let isDesktop = isWideScreen();
@let isMobile = !isDesktop;
@let exercieses = exerciesesContent();
<nz-layout class="base exercieses-viewer">
  @if (exercieses) {
    <nz-splitter
      [nzLayout]="isMobile ? 'vertical' : 'horizontal'"
      (nzResizeEnd)="onResize()"
    >
      <nz-splitter-panel
        nzDefaultSize="30%"
        nzMin="10%"
        [nzMax]="1000"
        [nzResizable]="isDesktop"
      >
        <aside class="task-description">
          <button [disabled]="isButtonDisabled()" (click)="runCode()">
            test run
          </button>
          <article [swContent]="exercieses"></article>
        </aside>
      </nz-splitter-panel>
      <nz-splitter-panel (nzResizeEnd)="onResize()" [nzResizable]="isDesktop">
        <nz-splitter nzLayout="vertical">
          <nz-splitter-panel
            nzDefaultSize="70%"
            nzMin="20%"
            nzMax="90%"
            [nzResizable]="isDesktop"
          >
            <form [formGroup]="codeGroup">
              <nz-code-editor
                #editor
                formControlName="code"
                [nzEditorOption]="{
                  language: 'javascript',
                  theme: 'vs-dark',
                  minimap: {
                    enabled: false,
                  },
                }"
                (nzEditorInitialized)="formatCode()"
              ></nz-code-editor>
            </form>
          </nz-splitter-panel>
          <nz-splitter-panel [nzMin]="200" [nzResizable]="isDesktop">
            <div class="results">
              @let executionResult = lastExecutionResult();
              {{ executionResult | json }}
            </div>
          </nz-splitter-panel>
        </nz-splitter>
      </nz-splitter-panel>
    </nz-splitter>
  } @else {
    <sw-loader [isFullSize]="true"></sw-loader>
  }
</nz-layout>
