<div #alert>
  <nz-alert
    nzType="info"
    nzShowIcon="false"
    nzCloseable
    nzBanner
    [nzMessage]="banner"
    (nzOnClose)="burgerTopDistance.set('66px')"
  ></nz-alert>
</div>
<nz-layout class="root-layout">
  <ng-template #banner>
    <p class="banner">საიტი არის დეველოპმენტის პროცესში</p>
  </ng-template>

  <header
    [class.home-header]="isHomePage()"
    [ngStyle]="{
      backgroundColor: isMenuOpen()
        ? 'transparent'
        : isHomePage()
          ? '#e6f7ff'
          : 'transparent',
    }"
  >
    <div class="brand">
      <a routerLink="/">
        <img
          src="/assets/icons/android-chrome-192x192.png"
          alt="ისწავლეს ლოგო"
        />
        <span>{{ 'ისწავლე' | uppercase }}</span>
      </a>
      @if (isDev) {
        <sw-search (searchCompleted)="closeMenu()"></sw-search>
      }
    </div>
    <nav>
      <ul
        nz-menu
        [nzMode]="menuMode()"
        [class.is-open]="isMenuOpen()"
        [ngStyle]="{ top: burgerTopDistance() }"
      >
        @for (nav of headerNavigationItems(); track nav.routerLink) {
          <li
            nz-menu-item
            [nzMatchRouter]="$index === 0"
            [nzMatchRouterExact]="$index === 0"
            [nzSelected]="nav.isActive"
          >
            <a [routerLink]="nav.routerLink" (click)="closeMenu()">
              {{ nav.title }}</a
            >
          </li>
        }
        <div class="actions">
          <a href="https://github.com/educata/iswavle" target="_blank">
            <span nz-icon nzType="github" nzTheme="outline"></span>
          </a>
          <a
            role="button"
            nz-dropdown
            nzPlacement="bottomRight"
            [nzDropdownMenu]="themeMenu"
          >
            <span nz-icon nzType="bg-colors" nzTheme="outline"></span>
          </a>
          <nz-dropdown-menu #themeMenu="nzDropdownMenu">
            <ul nz-menu>
              @for (theme of themeOptions; track theme.value) {
                <li nz-menu-item (click)="changeTheme(theme.value)">
                  {{ theme.title }}
                </li>
              }
            </ul>
          </nz-dropdown-menu>
        </div>
      </ul>
      <button
        nz-button
        class="burger"
        aria-label="გამოაჩინე სანავიგაციო ველი"
        [attr.aria-expanded]="isMenuOpen()"
        (click)="toggleMenu()"
      >
        <span
          nz-icon
          [nzType]="isMenuOpen() ? 'close' : 'menu'"
          [attr.aria-label]="isMenuOpen() ? 'მენიუს გახსნა' : 'მენიუს დახურვა'"
        ></span>
      </button>
    </nav>
  </header>
  <nz-layout>
    <router-outlet></router-outlet>
  </nz-layout>
</nz-layout>
