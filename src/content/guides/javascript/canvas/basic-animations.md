---
title: 'ძირითადი ანიმაციები'
description: 'ძირითადი ანიმაციები კანვასის გამოყენებით JavaScript-ში'
keywords: 'FILL LATER'
---

მეტწილადად თითოეულ ვებგვერდს სჭირდება ანიმაცია. ეს ანიმაცია შეიძლება იყოს
მომხარებლის დაყოვნებისთვის, როცა რაღაც იტვირთება ან სრულიადაც უბრალოდ
ვიზუალურად გვსურს რაღაც ანიმაციის მიღება.

ანიმაცია შესაძლებელია დიზაინერმა მოამზადოს გიფის ან სხვა გაფართოების სახით,
რასაც შემდეგ გამოვიყენებთ ვიზუალზე. თუმცა დიზაინერის მიერ შესრულებული ანიმაცია
ხშირ შემთხვევაში დიდი ფაილია, რის ჩასატვირთადაც დიდი რესურსი იხარჯება (განსაკუთრებით
თუ მომხარებლის ინტერნეტი არ არის 'ულიმიტო'), ამიტომაც შეგვიძლია იგივე ანიმაცია
CSS-ში ან კანვასშიც ავაწყოთ JavaScript-ის გამოყენებით. ამ სტატიაში განვიხილავთ
თუ როგორ არის შესაძლებელი მარტივი ანიმაციების შესრულება.

## ანიმაციის ძირითადი ნაბიჯები

განვიხილოთ ნაბიჯები, რომლებიც დაგჭირდებათ კადრის (frame) დასახატად:

1. **გავასუფთავოთ კანვასი** სხვა ზედმეტი ფიგურებისგან, რომლებიც ამჟამინდელ
   კადრში არ გვჭირდება. ყველაზე მარტივი მიდგომა არის [`clearRect`](./doc/guides/javascript/drawing-figures#clearRect)
   მეთოდის გამოყენება.
2. **სთეითის შენახავა** ხშირად დაგჭირდებათ, როცა სხვადასხვა სტილიზაციებისა და
   ტრანსფორმაციების გამოყენებას ბევრჯერ აპირებთ.
3. **ანიმაციური ფორმების** ხაზვა სხვადასხვა კადრის დროს.
4. **სთეითის აღდგენა** როცა წინა სთეითში არსებული სტილიზაციების გამოყენება გსურთ.

## ანიმაციის კონტროლი

ფიგურები რომლებიც იხატება კანვასში შესაძლებელია პირდაპირ მეთოდის გამოძახებით
გამოვიტანოთ ვიზუალზე ან ჩვენი ფუნქციების გავლით. ნორმალურ პირობებში ანიმაციას ვხედავ მაშინ
როცაც კანვასის სკრიპტი დაასრულებს გაშვებას. მაგალითად, შეუძლებელია ანიმაციის გაკეთება
[`for`](./doc/guides/javascript/loops#for) ციკლიდან.

ამიტომ თუ გვსურს კარგი ანიმაციის გაშვება საჭიროა რაღაც დროით შევაყოვნოთ მოქმედებები, რომ ყველაფერი
ერთიანად არ შესრულდეს. ამ შედეგის მისაღებად კი ორი გზა არსებობს.

### დაგეგმილი განახლებები

დაგეგმილი განახლებებისთვის გვაქვს: `setTimeout()`, `setInterval()` და `window.requestAnimationFrame()` ფუნქციები,
რომლებიც დროთა განმავლობაში შეგვიძლია გამოვიძახოთ.

[`setTimeout`](https://developer.mozilla.org/en-US/docs/Web/API/setTimeout) ფუნქცია გამოიყენება გარკვეული კოდის გასაშვებად,
რაღაც დროის შემდგომ. ფუნქცია პარამეტრად ღებულობს `callback` ფუნქციას (თუ რა კოდი გაეშვას) და დროს მილიწამებში (რა დროში გაეშვას).

```js
console.log('პირველი ლოგი');
setTimeout(() => {
  console.log('ორი წამის მერე ლოგი');
}, 2000);
```

[`setInterval`](https://developer.mozilla.org/en-US/docs/Web/API/setInterval) ფუნქცია მსგავსია `setTimeout`-ს, ოღონდ განსხვავება გვაქვს
თუ რამდენჯერ მოხდება მისი გამოძახება. `setTimeout` გამოძახება ხდება მხოლოდ ერთხელ, ხოლო `setInterval` იმდენჯერ სანამ ინტერვალს არ მოვხსნით.
`setInterval` ფუნქცია აბრუნებს ინტერვალიდ ID, რომელიც შემდეგ გამოგვადგება ინტერვალის გასათიშად. თუ ამ ID არ შევინახავთ მაშინ `setInterval`-ში
არსებული ფუნქცია გამოიძახება უსასრულოდ.

```js
const interval = setInterval(() => {
  console.log('ყოველ 2 წამში დაილოგოს კოდი');
}, 2000);

setTimeout(() => {
  console.log('10 წამის შემდგომ გავთიშოთ ინტერვალის ფუნქცია');
  clearInterval(interval);
}, 10000);
```

[`requestAnimationFrame`](https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame) ფუნქცია ეუბნება ბრაუზერს, რომ გვსურს
ანიმაციის გაშვება და მოითხოვს ფუნქციის გაშვებას მანამ სანამ მოხდება არსებული ანიმაციის გაშვება.

თუ არ გსურთ მომხარებლის ჩართულობა ანიმაციის დროს მაშინ შეგიძლიათ გამოიყენოთ `setInterval` ფუნქცია, რომელიც გაეშვა რაღაც დროის ინტერვალით
ყოველჯერზე. პირობითად თუ თამაშის აწყობას ვაპირებთ ვებგვერდზე მისი ვიზუალი შეგვიძლია კანვასში გამოვიტანოთ და აქვე გავაკეთოთ ანიმაციის განახლებები.
ესეთ დროს არ არის საჭირო `setInterval` (თუ რაიმე სპეციფიკურს არ აკეთებთ დროის შემდგომ) გამოყენება შეგვიძლია მოვუსმინოთ მომხარებლის
კლავიატურას (WASD) და მის მიხედვით გავუშვათ ანიმაციები.

შემდგომ მაგალითებში გამოვიყენებთ `requestAnimationFrame` ფუნქციას, რომ გავაკონტროლოთ ანიმაციები. ამ ფუნქციის გამოყენებით უფრო სწრაფ და ოპტიმიზირებულ
ანიმაციას მივიღებთ. დრო რის მიხედვითაც უნდა გაეშვას `callback` ფუნქცია, ხშირ შემთხვევაში არის `60` ჯერ თითო წამის განმავლობაში, რაც შედეგად გვაძლევს
`60fps` (frame per second), შეგვიძლია ეს რაოდენობა შევცვალოთ ჩვენთვის სასრუველ მნიშვნელობაზე.
