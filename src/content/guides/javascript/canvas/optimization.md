---
title: 'კანვასის ოპტიმიზირება'
description: 'რჩევები Javascript-ის კანვასის გამოყენების დროს'
keywords: 'offscreenCanvas'
---

წინა სტატიებში განვიხილეთ თუ როგორ ვიმუშავოთ კანვასში. ამ სტატიაში კი განვიხილავთ
იმ მიდგომებს, რომლის გამოყენებითაც უფრო ოპტიმიზირებული იქნება თქვენი კანვასი.

## პრე-რენდერი მსგავსი ობიექტებისა და განმეორებადი ობიექტების

ხშირად შესაძლებელია დაგვჭირდეს ვიზუალზე ერთნაირი ელემენტების დარენდერება რამოდენიმე კანვასში
ან იგივე კანვასში გარკვეული დროის შემდგომ. ესეთ დროს შეგიძლია გამოიყენოთ `offscreenCanvas` თვისება.
შეგიძლიათ დაარენდეროთ `offscreen` შედეგი მთავარ კანვასში იმდენჯერ რამდენჯერაც დაგჭრდებათ, რისი
გამოყენების მიხედვითაც აღარ მოგიწევს კოდის დუბლირება.

```js
myCanvas.offscreenCanvas = document.createElement('canvas');
myCanvas.offscreenCanvas.width = myCanvas.width;
myCanvas.offscreenCanvas.height = myCanvas.height;

myCanvas.getContext('2d').drawImage(myCanvas.offScreenCanvas, 0, 0);
```

## მთელი რიცხვების გამოყენება

საბ-პიქსელების დარენდერება იწყება მაშინ როცა დასარენდერებელ ობიექტს კანვასში არ აქვთ მთელი რიცხვის მნიშვნელობა.

```js
ctx.drawImage(myImage, 0.3, 0.5);
```

მსგავსი კოდი კანვას აიძულებს ზედმეტი მოქმედებების შესრულებას, რომ შეიქმნას **anti-aliasing**-ის ეფექტი. თავის ასარიდებლად შეგიძლიათ მნიშვნელობა წინასწარ დაამრგვალოთ
[მათემატიკური მეთოდების](./guides/javascript/math#მეთოდები) გამოყენებით.

## გამოიყენეთ CSS დიდი ბექგრაუნდ სურათების დასარენდერებლად

ხშირად გვიწევს კანვასზე რაღაც ბექგრაუნდ სურათის მინიჭება. როცა იმავე კანვასზე ვიყენებთ ვანახლებთ ანიმაციას, გვიწევს იგივე ბექგრაუნდის ყოველ ჯერზე თავიდან დარენდერება, რაც არ არის ოპტიმიზირებული,
ესეთ დროს ჯობია CSS გამოყენებით დასტილოთ ბექგრაუნდი.

## გათიშეთ გამჭვირვალობის ეფექტი

თუ არ აპირებთ კანვასში გამჭვირვალობის ეფექტის გამოყენებას, მაშინ უმჯობესია ის თავიდანვე გათიშოთ.
გასათიშად საჭირაო `alpha` თვისების `false`-ზე დაყენება, როცა `getContext` მეთოდს ვიყენებთ.

```js
const ctx = canvas.getContext('2d', { alpha: false });
```

## ზოგადი რჩევები

- აარიდეთ თავი კანვასის სტეითის ცვლილებებს, როცა შეგიძლიათ.
- დაარენდერეთ მხოლოდ სქრინის განსხვავები და არა მთლიანი ახალი სთეითი.
- თავი აარიდეთ [`shadowBlur`](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/shadowBlur) გამოყენებას, როცა შეგიძლიათ.
- თავი აარიდეთ [ტექსტების დარენდერებას](./doc/guides/javascript/canvas/drawing-text), როცა შეგიძლიათ.
- ცადეთ განსხვავებული მეთოდები კანვასის გასასუფთავებლად (`clearRect`, `fillRect` და ზომის შეცვლად).
- ანიმაციების გამოყენების დროს, ამჯობინეთ `window.requestAnimationFrame` გამოყენება, ვიდრე `setInterval`.
- ყურადღებით გამოიყენეთ მძიმე ფიზიკის ბიბლიოთეკები, როცა იყენებთ ანიმაციებს.
